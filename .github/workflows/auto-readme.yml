name: Auto Update README
on:
  push:
    paths:
      - 'protocol.json'
      - 'scripts/auto_update/templates/README.tpl.md'
  workflow_dispatch: {}
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup jq and gettext
        run: sudo apt-get update && sudo apt-get install -y jq gettext-base

      - name: Ensure template exists and render README
        run: |
          set -e
          mkdir -p scripts/auto_update/templates
          if [ ! -f scripts/auto_update/templates/README.tpl.md ]; then
            cat > scripts/auto_update/templates/README.tpl.md <<'EOF'
